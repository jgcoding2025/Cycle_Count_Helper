
/*

//These tags output quantities
net_secondary_adjustments = Σ(count − system) over all non-default, non-ST01 locations
default_adjusted_noconstraint = default_system − net_secondary_adjustments
default_adjusted_with_constraint = max(default_adjusted_noconstraint, 0)
residual_unbalanced = default_adjusted_noconstraint - default_adjusted_with_constraint
"default_outside_tolerance_qty = 
    if default_counted < expected_physical_min, then return default_counted - MIN
    else if default_counted is > expected_physical_max, then return default_counted - MAX"

//These are important for scenarios 3 and 6
default_MIN_capped = MAX(default_counted − ST01, 0)
default_MAX_capped = default_counted + ST01

//These two tags are crucial for determining which scenario applies, outputting a simple Yes or No
eligible_for_ST01_logic = "Yes" if Type is Unsecured, location is the Default, Allocation Category is Available or Available upon request, and ST01 <> 0, else "No"
unbalanced_secondary = "Yes" if residual_unbalanced is negative

//These review the two tags to determine logic state. Only one scenario can be TRUE at a time, the remaining tags will be FALSE.
scenario_1 = TRUE if ST01 logic and secondary variances do not apply, else FALSE
scenario_2 = TRUE if ST01 logic does not apply, secondary variance does apply, and unbalanced secondary does not apply
scenario_3 = TRUE if ST01 logic does not apply, but unbalanced secondary does
scenario_4 = TRUE if ST01 logic applies, but secondary variances do not, else FALSE
scenario_5 = TRUE if ST01 logic and secondary variances both apply, unbalanced secondary does not
scenario_6 = TRUE if ST01 logic and unbalanced secondary both apply

//This is likely redundant and can be condensed in the future
_scenario = checks to determine which scenario is TRUE
if scenario_1 = TRUE, then output "Scenario 1"
if scenario_2 = TRUE, then output "Scenario 2"
if scenario_3 = TRUE, then output "Scenario 3"
if scenario_4 = TRUE, then output "Scenario 4"
if scenario_5 = TRUE, then output "Scenario 5"
if scenario_6 = TRUE, then output "Scenario 6"

//Final decision making to determine what to set the location qty to
"set_location_qty_to =
if location is secondary (non-default, non-ST01), return count

ELSE IF location is ST01:
    blank / no output

ELSE (location is Default):
if Scenario 1, default_counted
if Scenario 2, default_counted
if Scenario 3, default_counted
if Scenario 4, default_system + default_outside_tolerance_qty
if Scenario 5, MIN(default_MAX_capped, MAX(default_MIN_capped, (default_system + default_outside_tolerance_qty) - net_secondary_adjustments))
if Scenario 6, MIN(default_MAX_capped, MAX(default_MIN_capped, default_adjusted_with_constraint))

*/